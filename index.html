<!DOCTYPE html>
<html lang="en">

<thead>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/slots-picker.css">
    <title>Slots Picker</title>
</thead>

<body>
    <div id="slots-picker">
        <!-- JS SCRIPT WILL BE FILL THIS CONTAINER -->
    </div>
    <script type="module">
        import { slotsPicker } from "./js/slots-picker.js"

        new slotsPicker({
            slotsPickerEl: "slots-picker",
            multipleSelector: true,
            fromDate: new Date("2021-12-14"),
            showXdays: 7,
            selectedSlots: ["2021-12-14T09:55:48.000Z"],
            msg: {
                notAvailableSlots: {
                    p: "Aucun slot disponible",
                    title: "Cliquer ici pour consulter la disponibilité ",
                },
                slots: {
                    title: "Cliquer sur ce créneau pour réserver...",
                },
            },
            availableSlots:
            {
                slots: [
                    {
                        begin: "2021-12-14T09:55:48.000Z",
                        end: "2021-12-14T10:01:48.000Z"
                    },
                    {
                        begin: "2021-12-14T10:01:48.000Z",
                        end: "2021-12-14T10:07:48.000Z"
                    },
                    {
                        begin: "2021-12-15T08:00:00.000Z",
                        end: "2021-12-15T08:06:00.000Z"
                    },
                    {
                        begin: "2021-12-15T08:06:00.000Z",
                        end: "2021-12-15T08:12:00.000Z"
                    },
                    {
                        begin: "2021-12-15T08:12:00.000Z",
                        end: "2021-12-15T08:18:00.000Z"
                    },
                    {
                        begin: "2021-12-15T08:18:00.000Z",
                        end: "2021-12-15T08:24:00.000Z"
                    },
                    {
                        begin: "2021-12-15T14:00:00.000Z",
                        end: "2021-12-15T14:06:00.000Z"
                    },
                    {
                        begin: "2021-12-15T14:06:00.000Z",
                        end: "2021-12-15T14:12:00.000Z"
                    },
                    {
                        begin: "2021-12-16T14:03:00.000Z",
                        end: "2021-12-15T14:12:00.000Z"
                    },
                    {
                        begin: "2021-12-17T14:18:00.000Z",
                        end: "2021-12-15T14:12:00.000Z"
                    },
                ],
                nextAvailableSlot: "2021-12-25T14:12:00.000Z",
            },

            getSlots: function (fromDate) {
                console.log("GET SLOTS FROM BACKEND FROM FOLLOWING DATE : " + fromDate)

                function addDay(date, x) {
                    return new Date(new Date(date).setDate(date.getDate() + x)).getTime()
                }

                return {
                    slots: [
                        {
                            begin: "2021-12-21T14:06:00.000Z",
                            end: "2021-12-21T14:12:00.000Z"
                        },
                        {
                            begin: "2021-12-21T15:06:00.000Z",
                            end: "2021-12-21T14:12:00.000Z"
                        },
                        {
                            begin: "2021-12-21T16:06:00.000Z",
                            end: "2021-12-21T14:12:00.000Z"
                        },
                    ],
                    nextAvailableSlot: addDay(fromDate, 10),
                }
            },
            slotsOnClick: function (eventSlot, selectedSlots) {
                if (eventSlot.isNewSelect) {
                    console.log("New slot selected : " + eventSlot.date);
                } else {
                    console.log("New slot unselected : " + eventSlot.date);
                }
                console.log("Slots selected are now : " + selectedSlots);
            },
        }).init();
    </script>
</body>

</html>